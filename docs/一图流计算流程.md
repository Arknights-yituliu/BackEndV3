# 材料一图流关卡效率计算过程

### 1.蓝材料的价值初始值为绿票商店的售价
注：初始值可随意写入，用绿票商店只是迭代次数较少，写入其他值最后也能迭代到最终结果
### 2.获取企鹅物流的原始数据

### 3.用加工站的合成表进行其他稀有度材料的价值推算

举例：<br>
蓝土为5个绿土合成<br>
绿土价值 = 蓝土价值 ÷ 5 - 龙门币消耗 + 副产物期望价值<br>

紫土为4个蓝土合成<br>
紫土价值 = 蓝土价值 * 4 - 龙门币消耗 - 副产物期望价值

### 4.用1和3步骤得到的所有稀有度的材料价值和企鹅物流的原始数据进行关卡效率计算
计算过程:<br>
V：关卡掉落材料的价值<br> K：关卡掉落掉率<br> AP：关卡消耗体力<br>  V<sub>L</sub>: 龙门币价值 <br>

关卡效率 = （ V<sub>1</sub> * K<sub>1</sub> + V<sub>2</sub> * K<sub>2</sub> +···+ V<sub>n</sub> * K<sub>n</sub> + AP * 1.2 * V<sub>L</sub> ）/ AP <br>

### 5.用4步骤得到的各个蓝材料的关卡最优效率对蓝材料的价值进行迭代
条件：定价本的关卡效率不能超过100%（1），即关卡的产出不能超出关卡的体力投入<br>
举例：<br>
从4步骤中计算的结果筛选出主产物为全新装置的所有主线关卡进行倒序排列<br>
得到最高的主线关卡效率为1.27，全新装置此时价值为45。<br>
关卡效率不能超过1。<br>
修正后全新装置的新价值为45*1/1.27 = 35.43 理智

### 6.将迭代后的蓝材料价值重复2，3，4，5步骤，直到所有的蓝材料最优关卡的效率无限逼近1



